CREATE TABLE `ut_map_user_permissions_unit_all` (
  `id_map_user_unit_permissions` int(11) NOT NULL AUTO_INCREMENT COMMENT 'Unique ID in this table',
  `syst_created_datetime` timestamp NULL DEFAULT NULL COMMENT 'When was this record created?',
  `creation_system_id` int(11) NOT NULL DEFAULT '1' COMMENT 'What is the id of the sytem that was used for the creation of the record?',
  `created_by_id` varchar(255) COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT 'The MEFE ID of the user who created this record',
  `creation_method` varchar(255) COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT 'How was this record created',
  `syst_updated_datetime` timestamp NULL DEFAULT NULL COMMENT 'When was this record last updated?',
  `update_system_id` int(11) DEFAULT NULL COMMENT 'What is the id of the sytem that was used for the last update the record?',
  `updated_by_id` varchar(255) COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT 'The MEFE ID of the user who updated this record',
  `update_method` varchar(255) COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT 'How was this record updated?',
  `organization_id` int(11) unsigned DEFAULT NULL COMMENT 'a FK to the table `uneet_enterprise_organizations` The ID of the organization that created this record',
  `is_obsolete` tinyint(1) DEFAULT '0' COMMENT 'is this obsolete?',
  `is_update_needed` tinyint(1) DEFAULT '0' COMMENT '1 if Unee-T needs to be updated',
  `unee_t_update_ts` timestamp NULL DEFAULT NULL COMMENT 'The Timestamp when the last Unee-T update has been made',
  `is_mefe_api_success` tinyint(1) DEFAULT '0' COMMENT '1 if this is a success, 0 if not',
  `mefe_api_error_message` text COLLATE utf8mb4_unicode_520_ci COMMENT 'The error message from the MEFE API (if applicable)',
  `unee_t_mefe_id` varchar(255) COLLATE utf8mb4_unicode_520_ci NOT NULL COMMENT 'The current Unee-T profile id of the person - this is the value of the field `_id` in the Mongo Collection `users`',
  `unee_t_unit_id` varchar(255) COLLATE utf8mb4_unicode_520_ci NOT NULL COMMENT 'ID of that Unit in Unee-T. This is a the value in the Mongo collection',
  `unee_t_role_id` smallint(6) DEFAULT NULL COMMENT 'FK to the Unee-T BZFE table `ut_role_types` - ID of the Role for this user.',
  `is_occupant` tinyint(1) DEFAULT '0' COMMENT '1 is the user is an occupant of the unit',
  `is_default_assignee` tinyint(1) DEFAULT '0' COMMENT '1 if this user is the default assignee for this role for this unit.',
  `is_default_invited` tinyint(1) DEFAULT '0' COMMENT '1 if the user is automatically invited to all the new cases in this role for this unit',
  `is_unit_owner` tinyint(1) DEFAULT '0' COMMENT '1 if this user is one of the Unee-T `owner` of that unit',
  `is_public` tinyint(1) DEFAULT '0' COMMENT '1 if the user is Visible to other Unee-T users in other roles for this unit. If yes/1/TRUE then all other roles will be able to see this user. IF No/FALSE/0 then only the users in the same role for that unit will be able to see this user in this unit',
  `can_see_role_landlord` tinyint(1) DEFAULT '0' COMMENT '1 if user is allowed to see the PUBLIC users in the role `landlord` (2) for this unit',
  `can_see_role_tenant` tinyint(1) DEFAULT '0' COMMENT '1 if user is allowed to see the PUBLIC users in the role `tenant` (1) for this unit',
  `can_see_role_mgt_cny` tinyint(1) DEFAULT '0' COMMENT '1 if user is allowed to see the PUBLIC users in the role `Mgt Company` (4) for this unit',
  `can_see_role_agent` tinyint(1) DEFAULT '0' COMMENT '1 if user is allowed to see the PUBLIC users in the role `agent` (5) for this unit',
  `can_see_role_contractor` tinyint(1) DEFAULT '0' COMMENT '1 if user is allowed to see the PUBLIC users in the role `contractor` (3) for this unit',
  `can_see_occupant` tinyint(1) DEFAULT '0' COMMENT '1 if user is allowed to see the PUBLIC occupants for this unit',
  `is_assigned_to_case` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_invited_to_case` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_next_step_updated` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_deadline_updated` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_solution_updated` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_case_resolved` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_case_blocker` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_case_critical` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_any_new_message` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_message_from_my_role` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_message_from_tenant` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_message_from_ll` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_message_from_occupant` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_message_from_agent` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_message_from_mgt_cny` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_message_from_contractor` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_new_ir` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_new_item` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_item_removed` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  `is_item_moved` tinyint(1) DEFAULT '0' COMMENT '1 if user wants to be notified',
  PRIMARY KEY (`unee_t_mefe_id`,`unee_t_unit_id`),
  UNIQUE KEY `map_user_unit_role_permissions` (`id_map_user_unit_permissions`),
  KEY `mefe_unit_must_exist_here` (`unee_t_unit_id`),
  KEY `map_mefe_unit_mefe_user_all_organization_id` (`organization_id`),
  CONSTRAINT `map_mefe_unit_mefe_user_all_organization_id` FOREIGN KEY (`organization_id`) REFERENCES `uneet_enterprise_organizations` (`id_organization`) ON UPDATE CASCADE,
  CONSTRAINT `mefe_unit_must_exist_here` FOREIGN KEY (`unee_t_unit_id`) REFERENCES `ut_map_external_source_units` (`unee_t_mefe_unit_id`) ON UPDATE CASCADE,
  CONSTRAINT `mefe_user_must_exist_here` FOREIGN KEY (`unee_t_mefe_id`) REFERENCES `ut_map_external_source_users` (`unee_t_mefe_user_id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_520_ci;
