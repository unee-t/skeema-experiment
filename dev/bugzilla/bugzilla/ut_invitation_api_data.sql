CREATE TABLE `ut_invitation_api_data` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'The unique ID in this table',
  `mefe_invitation_id` varchar(256) COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT 'The unique Id for the invitation that was generated in MEFE to do the data import',
  `mefe_invitation_id_int_value` int(11) unsigned DEFAULT NULL COMMENT 'The INT value for the invitation ID. We use this everywhere in the SELECT invocations.',
  `bzfe_invitor_user_id` mediumint(9) unsigned NOT NULL COMMENT 'The BZFE user id who creates this unit. this is a FK to the BZ table ''profiles''',
  `bz_user_id` mediumint(9) unsigned NOT NULL COMMENT 'The userid for the user that will be rfeplcing the dummy user for this role for this unit. This is a FK to the BZ table ''profiles''',
  `user_role_type_id` smallint(6) unsigned NOT NULL COMMENT 'The id of the role type for the invited user. This is a FK to the table ''ut_role_types''',
  `is_occupant` tinyint(1) DEFAULT '0' COMMENT '1 if TRUE, 0 if FALSE',
  `bz_case_id` mediumint(9) unsigned DEFAULT NULL COMMENT 'The id of the bug in th table ''bugs''',
  `bz_unit_id` mediumint(9) unsigned NOT NULL COMMENT 'The product id in the BZ table ''products''',
  `invitation_type` varchar(255) COLLATE utf8mb4_unicode_520_ci NOT NULL COMMENT 'The type of the invitation (assigned or CC)',
  `is_mefe_only_user` tinyint(1) DEFAULT '1' COMMENT '1 if the user is a MEFE only user. In this scenario, we will DISABLE the claim mail in the BZFE for that user',
  `user_more` varchar(500) COLLATE utf8mb4_unicode_520_ci DEFAULT '' COMMENT 'A text to give more information about the user. This will be used in the BZ Component Description',
  `mefe_invitor_user_id` varchar(256) COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT 'The id of the creator of this unit in the MEFE database',
  `processed_datetime` datetime DEFAULT NULL COMMENT 'The Timestamp when this invitation has been processed in the BZ database',
  `script` varchar(256) COLLATE utf8mb4_unicode_520_ci DEFAULT NULL COMMENT 'The SQL script or procedure that was used to process this record',
  `api_post_datetime` datetime DEFAULT NULL COMMENT 'Date and time when this invitation has been posted as porcessed via the Unee-T inviation API',
  PRIMARY KEY (`id`),
  UNIQUE KEY `mefe_invitation_id_must_be_unique` (`mefe_invitation_id`),
  KEY `invitation_bz_bug_must_exist` (`bz_case_id`),
  KEY `invitation_bz_invitee_must_exist` (`bz_user_id`),
  KEY `invitation_bz_invitor_must_exist` (`bzfe_invitor_user_id`),
  KEY `invitation_bz_product_must_exist` (`bz_unit_id`),
  KEY `invitation_invitation_type_must_exist` (`invitation_type`),
  KEY `mefe_invitation_id_int_value` (`mefe_invitation_id_int_value`),
  CONSTRAINT `invitation_bz_invitee_must_exist` FOREIGN KEY (`bz_user_id`) REFERENCES `profiles` (`userid`),
  CONSTRAINT `invitation_bz_invitor_must_exist` FOREIGN KEY (`bzfe_invitor_user_id`) REFERENCES `profiles` (`userid`),
  CONSTRAINT `invitation_bz_product_must_exist` FOREIGN KEY (`bz_unit_id`) REFERENCES `products` (`id`),
  CONSTRAINT `invitation_invitation_type_must_exist` FOREIGN KEY (`invitation_type`) REFERENCES `ut_invitation_types` (`invitation_type`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_520_ci;
